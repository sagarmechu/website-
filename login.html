<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Admin Login</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" crossorigin="anonymous">
  <style>
    body { background:#f7f7f7; }
    .login-wrap { max-width:380px; margin:10vh auto; background:#fff; padding:24px; border:1px solid #ddd; border-radius:6px; }
    .login-wrap h3 { margin-top:0; }
  </style>
</head>
<body>
  <div class="login-wrap">
    <h3>Admin Login</h3>
    <div id="msg" class="text-danger" style="min-height:20px"></div>
    <div class="form-group">
      <label>Username</label>
      <input id="user" class="form-control" autocomplete="username" autofocus>
    </div>
    <div class="form-group">
      <label>Password</label>
      <input id="password" type="password" class="form-control" autocomplete="current-password">
    </div>
    <button id="login" class="btn btn-primary btn-block">Login</button>
  </div>
<script>
  document.getElementById('login').addEventListener('click', doLogin);
  document.addEventListener('keydown', function(e){ if(e.key==='Enter') doLogin(); });
  async function doLogin(){
    const user = document.getElementById('user').value.trim();
    const password = document.getElementById('password').value;
    if (!user || !password){ setMsg('Enter username and password'); return; }
    setMsg('');
    const r = await fetch('/admin/login', { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify({ user, password }) });
    if (r.ok){ window.location.href = '/admin'; return; }
    const j = await r.json().catch(()=>({error:'Login failed'}));
    setMsg(j.error || 'Login failed');
  }
  function setMsg(t){ document.getElementById('msg').textContent = t || ''; }
</script>
</body>
</html>
